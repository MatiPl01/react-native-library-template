# React Native Library Template

This repository hosts an optimized React Native library boilerplate, designed to accelerate the process of library development.

Perfect for both bare React Native applications and those created through Expo, this boilerplate comes equipped with useful tools. These tools make library development straightforward and maintain high code quality.

## Features

- code style enforcement with eslint, prettier and TypeScript,
- precommit hooks checking code style and type issues,
- GitHub Actions enhancing the development process,
- automated library depolyments to npm and seamless versioning thanks to [_semantic-release_](https://github.com/semantic-release/semantic-release),
- example app for both bare React Native projects and Expo managed ones,
- `jest` setup with example tests

## Requirements

Node 18 or greater is required. Development for iOS requires a Mac and Xcode.

## Quick start

To create a new project simply run:

```sh
npx rnlibrary
```

Before you start the development, install all necessary dependencies with `yarn`:

```sh
yarn
```

**(iOS only)** Install required Pods for the bare React Native example app:

```sh
yarn example:bare pod
```

## GitHub Actions

To use GitHub Actions included in this boilerplate, you will have to provide 2 secrets (refer to [this](https://docs.github.com/en/actions/security-guides/using-secrets-in-github-actions) page of documentation for more details about secrets):

`GH_TOKEN` - GitHub token with `repo` permissions (see [docs](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) for more information GitHub access tokens),
`NPM_TOKEN` - npm token used by [_semantic-release_](https://github.com/semantic-release/semantic-release) to automatically deploy the library (see [docs](https://docs.npmjs.com/about-access-tokens) for more details about npm access tokens).

Alteratively, if you don't want to use GitHub Actions, you can simply remove workflows from the `.github` directory.

## Library development

### Project structure

Project can be divided into 2 subprojects:

- Library source code,
- Example app

### Library scope

The root directory of the project contains multiple configuration files for tools such as prettier, eslint and typescript. It also contains config of the [_semantic-release_](https://github.com/semantic-release/semantic-release) library used for easy npm deployments and proper library versioning as well as the [_react-native-builder-bob_](https://github.com/callstack/react-native-builder-bob) config used to build the library from source files.

#### Library source files

By default, the resulting library will contain files specified under the `files` key in the `package.json`:

- `src` directory - the directory where all library source should be written,
- `dist` directory - will be generated by **react-native-builder-bob** during the build process,
- `LICENSE` - you should add your `LICENSE` file as it is not provided by default,
- `CHANGELOG.md` - file containing all versions history with included changes, generated automatically by the **semantic-release** library.

#### Library dependencies

If you want to add dependency that will be used by your library, you should add it in the project root. I decided to use the `yarn` package manager as it is one of the most commonly used package managers which has good support for monorepos with workspaces (the example app). All dependencies should be installed with `yarn`.

### Example app

The template contains also example app which will be useful to test functionalities implemented in the library and create showcase features for library users. The example app won't be included in the library source files depoloyed to npm.

The example app lives in the `example` directory. You can see that this directory contains 3 subdirectories:

- `app` - where all example app source code should be located,
- `bare` - bare React Native app example,
- `expo` - React Native Expo app example.

If you don't want to support **Expo** or **bare** React Native apps, simply remove the corresponding directory.

#### Example app dependencies

All example app dependencies should be installed in the `example/app` directory that contains code shared between `bare` and `expo` example app. Similarly as in the library, you should use `yarn` package manager to manage your example app dependencies.

#### Useful commands

For bare React Native example app:

```sh
yarn example:bare start|android|ios|pod
```

For Expo React Native app:

```sh
yarn example:expo start|android|ios
```

- `start` - starts metro client
- `android` - starts example app on the Android emulator/device,
- `ios` - starts example app on the iOS simulator/device,
- `pod` - installs Pods required by example app native iOS dependencies.

### Automatic deployments

The `release.yaml` workflow included in the project contains the auto deployment logic. By default, the deployment will be caused on the **workflow dispatch** action (manually from the GitHub Actions page). You can change this behavior by modifying the workflow triggers.
